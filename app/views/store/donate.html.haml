= themed
:javascript
  // Expunge any nondigit characters in payment field, and confirm
  // payment amount before continuing.
  function confirmAndSubmit() {
    var amount_field = '#donation';
    var amountStr = $(amount_field).val();
    // ignore leading '$' sign if patron entered one
    amountStr = amountStr.replace(/^\$/, '');
    // delete everything after the first nondigit character
    amountStr = amountStr.replace(/[^0-9].*$/, '');
    $(amount_field).val(amountStr);
    var amountInt = parseInt(amountStr);
    if (isNaN(amountInt) || amountInt == 0) {
        alert("Please specify an amount.");
        return false;
    }
    if (confirm("Please confirm amount: OK to continue with payment of $" + amountInt.toString() + ".00 ?")) {
        A1.stripeSubmit();
    } 
    return false;   // disable form submission, since stripeResponseHandler will do it
  } 


#store
  #quick_donation
    %h1.text-center= sanitize(Option.quick_donation_banner)
    %p.text-center.lead-= sanitize(Option.quick_donation_explanation)

    = form_tag(quick_donate_path, {:id => '_stripe_payment_form', :onsubmit => 'return confirmAndSubmit()' }) do
      = hidden_field_tag 'referer', 'donate'
      #billing= render :partial => 'customers/billing_address', :locals => {:customer => @customer}

      %fieldset#donation_info
        %legend Donation Information
        .form-row
          .col-md-2.text-right
            %label.col-form-label{:for => :donation} Donation amount
          .col-md-1.text-right= text_field_tag 'donation', @amount, :size => 5, :class => 'form-control form-control-sm'
          .col-md-1.text-left .00
          .col-md-2
          .col-md-6
            %label.col-form-label{:for => :donor_listing} 
              If you'd like to be recognized as Anonymous, or if you'd like to donate in honor
              of someone else, please provide that information here:
        .form-row
          .col-md-2
          .col-md-4.strong Please enter digits only.
          .col-md-6= text_area_tag 'comments', '', :rows => 4, :class => 'form-control form-control-sm'

      = render :partial => 'credit_card', :locals => {:name => @customer.full_name }

      -# hidden field necessary for Stripe submit handler to fill in
      = hidden_field_tag 'commit', '', :name => 'commit', :id => '_stripe_commit'
      .row
        .col
        .col= submit_tag 'Charge Donation to Credit Card', :id => '_stripe_submit', :class => 'btn btn-success'
        .col
